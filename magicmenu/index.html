<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="assets/js/magiceye.js" type="text/javascript"></script>
    <script src="assets/js/ImgDepthMapper.js" type="text/javascript"></script>
    <script src="assets/js/CanvasDepthMapper.js" type="text/javascript"></script>
    <title>Document</title>
</head>

<body>


    <!-- <img id="magic-eye" width="640px" height="480px" src />
    <canvas id="my-img" src="trike.jpg" />
    <script>
        var img = document.getElementById('my-img');
        var id = new MagicEye.ImgDepthMapper(img)
        MagicEye.render({
            el: 'magic-eye',
            depthMapper: id
        });
    </script> -->
    <!-- <img id="my-img" onload="draw()" style="display:none" src="trike.jpg" /> -->
    <canvas id="canvas-preview" width="640px" height="480px"></canvas>
    <img id="magic-eye" width="1280px" height="960px" style="" src />
    <script>
        var c = document.getElementById("canvas-preview");
        var ctx = c.getContext("2d");
        var img = document.getElementById("my-img");

        function draw() {
            ctx.drawImage(img, 10, 10);
        }

        function randomRGBa() {
            return [Math.floor(Math.random() * 256),
                Math.floor(Math.random() * 256),
                Math.floor(Math.random() * 256),
                255
            ];
        }

        function generatePalette(numColors) {
            var palette = [];
            for (var i = 0; i < numColors; i++) {
                palette.push(randomRGBa());
            }
            return palette;
        }

        function renderMagicEye() {
            blackAndWhite = false;
            var canvas = document.querySelector('canvas');
            MagicEye.render({
                el: 'magic-eye',
                colors: blackAndWhite ? [
                    [0, 0, 0, 255],
                    [255, 255, 255, 255]
                ] : generatePalette(10),
                depthMapper: new MagicEye.CanvasDepthMapper(canvas, {
                    inverted: false
                })
            });
        }
        renderMagicEye();
    </script>
</body>

</html>